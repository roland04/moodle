{"version":3,"file":"tab.min.js","sources":["../../src/bootstrap/tab.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.2.3): tab.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport { defineJQueryPlugin, getElementFromSelector, getNextActiveElement, isDisabled } from './util/index'\nimport EventHandler from './dom/event-handler'\nimport SelectorEngine from './dom/selector-engine'\nimport BaseComponent from './base-component'\n\n/**\n * Constants\n */\n\nconst NAME = 'tab'\nconst DATA_KEY = 'bs.tab'\nconst EVENT_KEY = `.${DATA_KEY}`\n\nconst EVENT_HIDE = `hide${EVENT_KEY}`\nconst EVENT_HIDDEN = `hidden${EVENT_KEY}`\nconst EVENT_SHOW = `show${EVENT_KEY}`\nconst EVENT_SHOWN = `shown${EVENT_KEY}`\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}`\nconst EVENT_KEYDOWN = `keydown${EVENT_KEY}`\nconst EVENT_LOAD_DATA_API = `load${EVENT_KEY}`\n\nconst ARROW_LEFT_KEY = 'ArrowLeft'\nconst ARROW_RIGHT_KEY = 'ArrowRight'\nconst ARROW_UP_KEY = 'ArrowUp'\nconst ARROW_DOWN_KEY = 'ArrowDown'\n\nconst CLASS_NAME_ACTIVE = 'active'\nconst CLASS_NAME_FADE = 'fade'\nconst CLASS_NAME_SHOW = 'show'\nconst CLASS_DROPDOWN = 'dropdown'\n\nconst SELECTOR_DROPDOWN_TOGGLE = '.dropdown-toggle'\nconst SELECTOR_DROPDOWN_MENU = '.dropdown-menu'\nconst NOT_SELECTOR_DROPDOWN_TOGGLE = ':not(.dropdown-toggle)'\n\nconst SELECTOR_TAB_PANEL = '.list-group, .nav, [role=\"tablist\"]'\nconst SELECTOR_OUTER = '.nav-item, .list-group-item'\nconst SELECTOR_INNER = `.nav-link${NOT_SELECTOR_DROPDOWN_TOGGLE}, .list-group-item${NOT_SELECTOR_DROPDOWN_TOGGLE}, [role=\"tab\"]${NOT_SELECTOR_DROPDOWN_TOGGLE}`\nconst SELECTOR_DATA_TOGGLE = '[data-bs-toggle=\"tab\"], [data-bs-toggle=\"pill\"], [data-bs-toggle=\"list\"]' // todo:v6: could be only `tab`\nconst SELECTOR_INNER_ELEM = `${SELECTOR_INNER}, ${SELECTOR_DATA_TOGGLE}`\n\nconst SELECTOR_DATA_TOGGLE_ACTIVE = `.${CLASS_NAME_ACTIVE}[data-bs-toggle=\"tab\"], .${CLASS_NAME_ACTIVE}[data-bs-toggle=\"pill\"], .${CLASS_NAME_ACTIVE}[data-bs-toggle=\"list\"]`\n\n/**\n * Class definition\n */\n\nclass Tab extends BaseComponent {\n  constructor(element) {\n    super(element)\n    this._parent = this._element.closest(SELECTOR_TAB_PANEL)\n\n    if (!this._parent) {\n      return\n      // todo: should Throw exception on v6\n      // throw new TypeError(`${element.outerHTML} has not a valid parent ${SELECTOR_INNER_ELEM}`)\n    }\n\n    // Set up initial aria attributes\n    this._setInitialAttributes(this._parent, this._getChildren())\n\n    EventHandler.on(this._element, EVENT_KEYDOWN, event => this._keydown(event))\n  }\n\n  // Getters\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  show() { // Shows this elem and deactivate the active sibling if exists\n    const innerElem = this._element\n    if (this._elemIsActive(innerElem)) {\n      return\n    }\n\n    // Search for active tab on same parent to deactivate it\n    const active = this._getActiveElem()\n\n    const hideEvent = active ?\n      EventHandler.trigger(active, EVENT_HIDE, { relatedTarget: innerElem }) :\n      null\n\n    const showEvent = EventHandler.trigger(innerElem, EVENT_SHOW, { relatedTarget: active })\n\n    if (showEvent.defaultPrevented || (hideEvent && hideEvent.defaultPrevented)) {\n      return\n    }\n\n    this._deactivate(active, innerElem)\n    this._activate(innerElem, active)\n  }\n\n  // Private\n  _activate(element, relatedElem) {\n    if (!element) {\n      return\n    }\n\n    element.classList.add(CLASS_NAME_ACTIVE)\n\n    this._activate(getElementFromSelector(element)) // Search and activate/show the proper section\n\n    const complete = () => {\n      if (element.getAttribute('role') !== 'tab') {\n        element.classList.add(CLASS_NAME_SHOW)\n        return\n      }\n\n      element.removeAttribute('tabindex')\n      element.setAttribute('aria-selected', true)\n      this._toggleDropDown(element, true)\n      EventHandler.trigger(element, EVENT_SHOWN, {\n        relatedTarget: relatedElem\n      })\n    }\n\n    this._queueCallback(complete, element, element.classList.contains(CLASS_NAME_FADE))\n  }\n\n  _deactivate(element, relatedElem) {\n    if (!element) {\n      return\n    }\n\n    element.classList.remove(CLASS_NAME_ACTIVE)\n    element.blur()\n\n    this._deactivate(getElementFromSelector(element)) // Search and deactivate the shown section too\n\n    const complete = () => {\n      if (element.getAttribute('role') !== 'tab') {\n        element.classList.remove(CLASS_NAME_SHOW)\n        return\n      }\n\n      element.setAttribute('aria-selected', false)\n      element.setAttribute('tabindex', '-1')\n      this._toggleDropDown(element, false)\n      EventHandler.trigger(element, EVENT_HIDDEN, { relatedTarget: relatedElem })\n    }\n\n    this._queueCallback(complete, element, element.classList.contains(CLASS_NAME_FADE))\n  }\n\n  _keydown(event) {\n    if (!([ARROW_LEFT_KEY, ARROW_RIGHT_KEY, ARROW_UP_KEY, ARROW_DOWN_KEY].includes(event.key))) {\n      return\n    }\n\n    event.stopPropagation()// stopPropagation/preventDefault both added to support up/down keys without scrolling the page\n    event.preventDefault()\n    const isNext = [ARROW_RIGHT_KEY, ARROW_DOWN_KEY].includes(event.key)\n    const nextActiveElement = getNextActiveElement(this._getChildren().filter(element => !isDisabled(element)), event.target, isNext, true)\n\n    if (nextActiveElement) {\n      nextActiveElement.focus({ preventScroll: true })\n      Tab.getOrCreateInstance(nextActiveElement).show()\n    }\n  }\n\n  _getChildren() { // collection of inner elements\n    return SelectorEngine.find(SELECTOR_INNER_ELEM, this._parent)\n  }\n\n  _getActiveElem() {\n    return this._getChildren().find(child => this._elemIsActive(child)) || null\n  }\n\n  _setInitialAttributes(parent, children) {\n    this._setAttributeIfNotExists(parent, 'role', 'tablist')\n\n    for (const child of children) {\n      this._setInitialAttributesOnChild(child)\n    }\n  }\n\n  _setInitialAttributesOnChild(child) {\n    child = this._getInnerElement(child)\n    const isActive = this._elemIsActive(child)\n    const outerElem = this._getOuterElement(child)\n    child.setAttribute('aria-selected', isActive)\n\n    if (outerElem !== child) {\n      this._setAttributeIfNotExists(outerElem, 'role', 'presentation')\n    }\n\n    if (!isActive) {\n      child.setAttribute('tabindex', '-1')\n    }\n\n    this._setAttributeIfNotExists(child, 'role', 'tab')\n\n    // set attributes to the related panel too\n    this._setInitialAttributesOnTargetPanel(child)\n  }\n\n  _setInitialAttributesOnTargetPanel(child) {\n    const target = getElementFromSelector(child)\n\n    if (!target) {\n      return\n    }\n\n    this._setAttributeIfNotExists(target, 'role', 'tabpanel')\n\n    if (child.id) {\n      this._setAttributeIfNotExists(target, 'aria-labelledby', `#${child.id}`)\n    }\n  }\n\n  _toggleDropDown(element, open) {\n    const outerElem = this._getOuterElement(element)\n    if (!outerElem.classList.contains(CLASS_DROPDOWN)) {\n      return\n    }\n\n    const toggle = (selector, className) => {\n      const element = SelectorEngine.findOne(selector, outerElem)\n      if (element) {\n        element.classList.toggle(className, open)\n      }\n    }\n\n    toggle(SELECTOR_DROPDOWN_TOGGLE, CLASS_NAME_ACTIVE)\n    toggle(SELECTOR_DROPDOWN_MENU, CLASS_NAME_SHOW)\n    outerElem.setAttribute('aria-expanded', open)\n  }\n\n  _setAttributeIfNotExists(element, attribute, value) {\n    if (!element.hasAttribute(attribute)) {\n      element.setAttribute(attribute, value)\n    }\n  }\n\n  _elemIsActive(elem) {\n    return elem.classList.contains(CLASS_NAME_ACTIVE)\n  }\n\n  // Try to get the inner element (usually the .nav-link)\n  _getInnerElement(elem) {\n    return elem.matches(SELECTOR_INNER_ELEM) ? elem : SelectorEngine.findOne(SELECTOR_INNER_ELEM, elem)\n  }\n\n  // Try to get the outer element (usually the .nav-item)\n  _getOuterElement(elem) {\n    return elem.closest(SELECTOR_OUTER) || elem\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Tab.getOrCreateInstance(this)\n\n      if (typeof config !== 'string') {\n        return\n      }\n\n      if (data[config] === undefined || config.startsWith('_') || config === 'constructor') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config]()\n    })\n  }\n}\n\n/**\n * Data API implementation\n */\n\nEventHandler.on(document, EVENT_CLICK_DATA_API, SELECTOR_DATA_TOGGLE, function (event) {\n  if (['A', 'AREA'].includes(this.tagName)) {\n    event.preventDefault()\n  }\n\n  if (isDisabled(this)) {\n    return\n  }\n\n  Tab.getOrCreateInstance(this).show()\n})\n\n/**\n * Initialize on focus\n */\nEventHandler.on(window, EVENT_LOAD_DATA_API, () => {\n  for (const element of SelectorEngine.find(SELECTOR_DATA_TOGGLE_ACTIVE)) {\n    Tab.getOrCreateInstance(element)\n  }\n})\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Tab)\n\nexport default Tab\n"],"names":["EVENT_KEY","EVENT_HIDE","EVENT_HIDDEN","EVENT_SHOW","EVENT_SHOWN","EVENT_CLICK_DATA_API","EVENT_KEYDOWN","EVENT_LOAD_DATA_API","ARROW_LEFT_KEY","ARROW_RIGHT_KEY","ARROW_UP_KEY","ARROW_DOWN_KEY","SELECTOR_INNER","SELECTOR_DATA_TOGGLE","SELECTOR_INNER_ELEM","SELECTOR_DATA_TOGGLE_ACTIVE","Tab","BaseComponent","constructor","element","_parent","this","_element","closest","_setInitialAttributes","_getChildren","on","event","_keydown","NAME","show","innerElem","_elemIsActive","active","_getActiveElem","hideEvent","EventHandler","trigger","relatedTarget","defaultPrevented","_deactivate","_activate","relatedElem","classList","add","_queueCallback","getAttribute","removeAttribute","setAttribute","_toggleDropDown","contains","remove","blur","includes","key","stopPropagation","preventDefault","isNext","nextActiveElement","filter","target","focus","preventScroll","getOrCreateInstance","SelectorEngine","find","child","parent","children","_setAttributeIfNotExists","_setInitialAttributesOnChild","_getInnerElement","isActive","outerElem","_getOuterElement","_setInitialAttributesOnTargetPanel","id","open","toggle","selector","className","findOne","attribute","value","hasAttribute","elem","matches","config","each","data","undefined","startsWith","TypeError","document","tagName","window"],"mappings":"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"}